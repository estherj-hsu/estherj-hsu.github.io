<!doctype html><html lang=en-us><head><meta charset=utf-8><title>Lotto Draw</title><link href=style.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.1.0.min.js integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin=anonymous></script></head><body><div class=wrapper><h1>::Lotto Draw::</h1><h2 id=des></h2><div id=resultBox class=resultBox></div><div id=ballsBox></div><button id=drawBtn class=btn-draw>Auto Draw</button>
<button id=resetBtn class="btn-reset close">Reset</button></div><script>var $ballsBox=$("#ballsBox");var $resultBox=$("#resultBox");var $drawBtn=$("#drawBtn");var $resetBtn=$("#resetBtn");var ballsNum=30;var drawNum=5;var balls=[];var drawBalls=[];$("#des").html(drawNum+' in '+ballsNum);function drawState(btn,state,txt){if(state==true){btn.removeClass("close");btn.text=txt;btn.disabled=false;}else{btn.addClass("close");btn.text=txt;btn.disabled=true;}}
function Balls(){var ballNodes={};this.add=function(num){for(var i=1;i<=num;i++){var id="ball-"+i;var $ball=$('<div id="'+id+'">'+(i<10?"0"+i:i)+'</div>');ballNodes[id]=$ball;$ballsBox.append($ball);balls.push(id);}
console.log(ballNodes);};this.draw=function(num){var ballIndex=Math.floor(Math.random()*balls.length);var id=balls.splice(ballIndex,1)[0];drawBalls.push(id);console.log(id,ballIndex);var drawBall=ballNodes[id];drawBall.addClass("is-chose");if(drawBalls.length==drawNum){drawState($drawBtn,false,"Done");drawState($resetBtn,true,"Reset");}else if(drawBalls.length>0){drawState($drawBtn,false,"Drawing");}
addResult(drawBalls.length-1);};this.reset=function(){balls=balls.concat(drawBalls);balls.sort(function(a,b){return a-b});for(var n in ballNodes){ballNodes[n].removeClass("is-chose");}
$ballsBox.removeClass("is-close");drawBalls=[];counter=0;drawState($drawBtn,true,"Auto draw");drawState($resetBtn,false,"Reset");$resultBox.empty();};}
function addResult(drewNum){var addBall=drawBalls[drewNum];addBall=addBall.substring(5);$ball=$('<div>'+(addBall<10?"0"+addBall:addBall)+'</div>');$resultBox.append($ball);}
var Drawing=new Balls();(function(num){Drawing.add(num);})(ballsNum)
function autoDraw(){var countSec=0.65;var counter=drawBalls.length;var i=setInterval(function(){counter++;Drawing.draw(drawNum);if(counter===drawNum){clearInterval(i);}},countSec*1000);}
function resetDraw(){Drawing.reset()}
$drawBtn.on("click",autoDraw);$resetBtn.on("click",resetDraw);</script></body></html>