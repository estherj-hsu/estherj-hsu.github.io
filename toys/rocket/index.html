<!doctype html><html lang=en-us><head><meta charset=utf-8><title>meteoret</title><link href=src/style.css rel=stylesheet><script src=src/soundmanager2-jsmin.js></script><script src=https://code.jquery.com/jquery-3.1.0.min.js integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin=anonymous></script><script>function getRandomInt(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
$(function(){var $body=$("body"),$stage=$("#stage"),$player=$("#player"),$score=$("#score"),meteor_phase=0,meteor_gap=250,meteorpeed=4,meteorpeedMax=10,hit_r=18,scoreTotal=0,scoreAdd=1,timer,speedUp,musicBg,musicCrash;function goLeft(){var x=parseInt($player.css("left"));$player.css("animation","left 0.2s");if(x>10)
$player.css("left",x-100+"px");}
function goRight(e){var x=parseInt($player.css("left"));$player.css("animation","right 0.2s");if(x<210)
$player.css("left",x+100+"px");}
function byKey(e){if(e.keyCode==37){goLeft();}else if(e.keyCode==39){goRight();}}
function byKeyInit(e){if(e.keyCode==13||e.keyCode==32){reset();initGame();}}
function initGame(){meteor_phase=0,meteorpeed=3,scoreTotal=0,scoreAdd=1;$player.css("left",($stage.width()-$player.width())/2+"px");$player.css("top",$stage.height()-$player.height()*2);$stage.find(".bomb").remove();$score.css({"animation":"","top":"","z-index":"","right":""});createMeteor();timer=setInterval(timer_func,1000/60);speedUp=setInterval(speedUp_func,1000);$(document).keydown(byKey);$(document).unbind("keydown",byKeyInit);musicCrash.stop();musicBg.play();}
soundManager.setup({onready:function(){musicBg=soundManager.createSound({id:'aSound',url:'src/music.mp3'});musicCrash=soundManager.createSound({id:'bSound',url:'src/crash.mp3'});initGame();}});function createMeteor(){var meteor_pos=[10,110,210];for(var i=0;i<2;i++){(i==0?i="":i="meteor2");$stage.append("<div class='block meteor "+i+"'></div>");var $meteor=$stage.find(".meteor:last");$meteor.data("phase",meteor_phase);var rand_index=getRandomInt(0,meteor_pos.length-1);var meteor_x=meteor_pos.splice(rand_index,1)[0];$meteor.css("left",meteor_x+"px");$meteor.css("top",-($meteor.height())+"px");}}
function gameOver(){musicCrash.play();musicBg.stop();$(document).unbind("keydown",byKey);clearInterval(timer);clearInterval(speedUp);$stage.append("<div id='gameOver' class='maskLayer gameOver'>Oops...<br/><span>Press Space or Enter</span></div>");$gameOver=$("#gameOver");$score.css({"animation":"score 0.5s forwards","top":"120px","z-index":"5","right":($stage.width()-$score.width()*1.5)/2+"px"});$(document).keydown(byKeyInit);}
function reset(){$gameOver.remove();$stage.find(".meteor").remove();}
function timer_func(){$stage.find(".meteor").each(function(){var meteor_y=parseInt($(this).css("top"));if(meteor_y>meteor_gap&&$(this).data("phase")==meteor_phase){meteor_phase++;createMeteor();}
var px=parseInt($player.css("left"))+$player.width()/2;var py=parseInt($player.css("top"))+$player.height()/2;var mx=parseInt($(this).css("left"))+$(this).width()/2;var my=parseInt($(this).css("top"))+$(this).height()/2;var pr_dist=Math.sqrt(Math.pow(px-mx,2)+Math.pow(py-my,2));if(hit_r*2>pr_dist){gameOver();$stage.append("<div class='bomb'></div>");$bomb=$(".bomb");$bomb.css("left",px-60+"px");$bomb.css("top",py-70+"px");}
if(meteor_y>$stage.height()){$(this).remove();return;}
$(this).css("top",meteor_y+meteorpeed+"px");$score.html(scoreTotal);scoreTotal+=scoreAdd;});}
function speedUp_func(){if(meteorpeed>=meteorpeedMax){meteorpeed=meteorpeedMax;clearInterval(speedUp);}
meteorpeed+=0.1;scoreAdd+=1;}})</script></head><body><div id=stage class=stage><div id=score class="block score"></div><div id=player class="block player"></div></div></body></html>